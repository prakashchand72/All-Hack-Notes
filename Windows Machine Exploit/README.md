For SMB

    smbclient -L //ip/
  
`this shows the directory on smb listening`

    smbclient //ip/{directory from above command}
  
For SMB Exploit 

    nmap -sC -sV -A ip --script=smb-vuln*
  
hashdump of windows

`inside the meterpreter shell` 

    run post/windows/gather/hashdump

Searching Files or Flag in windows machine

    dir flag*.txt /s /p
Fatching the usernames of the machine

    net users
